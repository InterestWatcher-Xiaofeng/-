# 🔥 批量关键词采集功能说明

## ✨ 新功能概述

**版本：** V1.2.0  
**更新日期：** 2025-10-30  
**功能：** 支持批量关键词自动采集

---

## 📋 功能特性

### 1. 多行关键词输入
- ✅ 支持在关键词输入框中输入多行
- ✅ 每行代表一组关键词
- ✅ 自动按顺序依次采集

### 2. 批量自动采集
- ✅ 自动循环执行每组关键词的采集
- ✅ 每组关键词独立保存数据文件
- ✅ 实时显示采集进度（如：[2/5] 正在采集...）

### 3. 独立文件保存
- ✅ 每组关键词生成独立的数据文件
- ✅ 文件名包含关键词和时间戳
- ✅ 避免数据混淆，便于管理

---

## 🎯 使用方法

### 步骤1：输入批量关键词

在"关键词"输入框中，每行输入一组关键词：

```
美食 探店
旅游 攻略
科技 数码
健身 教程
美妆 护肤
```

**说明：**
- 每行一组关键词
- 关键词之间用空格分隔
- 支持任意数量的关键词组

### 步骤2：配置采集参数

- **视频数量：** 每组关键词采集的视频数量（如：10个）
- **评论数量：** 每个视频采集的评论数量（如：50条）
- **保存格式：** CSV、JSON、Excel等

### 步骤3：开始批量采集

1. 点击"🚀 开始采集"按钮
2. 系统自动按顺序采集每组关键词
3. 实时显示进度：`[1/5] 正在采集: 美食 探店`
4. 每组完成后自动进入下一组

### 步骤4：查看结果

- 每组关键词生成独立的文件
- 文件名格式：`search_comments_美食探店_20251030_143052.csv`
- 采集完成后自动打开最后一组的文件

---

## 📊 示例场景

### 场景1：多主题内容采集

**需求：** 采集不同主题的抖音内容

**输入：**
```
美食 探店
旅游 攻略
科技 数码
```

**结果：**
- `search_comments_美食探店_20251030_140000.csv`
- `search_comments_旅游攻略_20251030_140500.csv`
- `search_comments_科技数码_20251030_141000.csv`

### 场景2：竞品分析

**需求：** 分析多个竞品的用户评论

**输入：**
```
品牌A 产品
品牌B 产品
品牌C 产品
```

**结果：**
- 每个品牌的评论数据独立保存
- 便于后续对比分析

### 场景3：热点追踪

**需求：** 追踪多个热点话题

**输入：**
```
热点1 关键词
热点2 关键词
热点3 关键词
```

**结果：**
- 每个热点的数据独立保存
- 时间戳记录采集时间

---

## ⚙️ 技术实现

### 核心改进

1. **UI改造**
   - 单行Entry → 多行TextBox
   - 支持80像素高度的多行输入
   - 占位符提示批量功能

2. **逻辑改造**
   - 解析多行关键词（按换行符分割）
   - 循环执行每组关键词的采集
   - 传递当前进度（index/total）

3. **文件命名**
   - 每组关键词独立命名
   - 包含时间戳避免覆盖
   - 自动清理空格和特殊字符

### 代码示例

```python
# 解析批量关键词
keywords_text = self.keywords_textbox.get("1.0", "end-1c").strip()
keywords_list = [line.strip() for line in keywords_text.split('\n') if line.strip()]

# 批量执行
for index, keywords in enumerate(keywords_list, 1):
    print(f"[{index}/{len(keywords_list)}] 正在采集: {keywords}")
    await self.async_douyin_crawler(keywords, max_count, content_type, index, len(keywords_list))
```

---

## 💡 使用技巧

### 技巧1：关键词组合策略

**推荐格式：**
```
主关键词 修饰词
```

**示例：**
```
美食 探店        # 主题 + 类型
旅游 攻略 2024   # 主题 + 类型 + 时间
科技 数码 评测   # 主题 + 类型 + 内容
```

### 技巧2：控制采集节奏

- 关键词不要太多（建议5-10组）
- 每组视频数量适中（建议10-20个）
- 避免短时间大量采集

### 技巧3：数据管理

- 定期清理旧数据
- 使用有意义的关键词组合
- 利用时间戳区分不同批次

---

## ⚠️ 注意事项

### 1. 采集时间
- 批量采集需要较长时间
- 建议在空闲时段运行
- 可随时点击"停止采集"中断

### 2. 数据存储
- 确保磁盘空间充足
- 每组关键词生成独立文件
- 文件数量 = 关键词组数

### 3. 平台限制
- 遵守平台使用规则
- 控制采集频率
- 避免被平台限制

### 4. 浏览器状态
- 批量采集期间保持浏览器登录
- 不要手动关闭浏览器窗口
- 网络保持稳定

---

## 🐛 常见问题

### Q1: 批量采集中途失败怎么办？

**A:** 
- 已完成的关键词数据已保存
- 可以删除已完成的关键词行
- 重新开始采集剩余的关键词

### Q2: 如何查看采集进度？

**A:**
- 界面底部显示实时进度
- 控制台输出详细日志
- 格式：`[2/5] 正在采集: 旅游 攻略`

### Q3: 文件保存在哪里？

**A:**
- 默认位置：`data/douyin/[格式]/`
- 可在"数据输出"标签页自定义输出目录
- 每组关键词独立文件

### Q4: 可以中途停止吗？

**A:**
- 可以点击"⏹️ 停止采集"按钮
- 当前正在采集的关键词会完成
- 后续关键词不再采集

---

## 🔄 版本历史

### V1.2.0 (2025-10-30)
- ✅ 新增：批量关键词采集功能
- ✅ 新增：多行关键词输入框
- ✅ 新增：采集进度实时显示
- ✅ 优化：每组关键词独立保存
- ✅ 修复：浏览器启动失败问题（os变量作用域）

### V1.1.0 (2025-10-25)
- ✅ 浏览器驱动自动化
- ✅ 登录错误处理优化

---

## 📞 技术支持

如有问题，请：
1. 查看控制台日志
2. 检查网络连接
3. 确认浏览器登录状态
4. 联系开发者

---

**祝您使用愉快！** 🎉

